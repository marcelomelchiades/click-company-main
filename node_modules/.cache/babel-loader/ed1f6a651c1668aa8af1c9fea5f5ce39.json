{"ast":null,"code":"import _slicedToArray from\"/home/clickc/www/click-company-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import axios from'axios';import React,{useState}from'react';import{Link}from'react-router-dom';import{useRecoilValue}from'recoil';import Input from'../../components/Input/Input';import Logo from'../../components/Logo/Logo';import{endpointState}from'../../recoil/atoms';import Loading from'../../components/Loading/Loading';var LoginHasAccount=function LoginHasAccount(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessageEmail=_useState6[0],setErrorMessageEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessagePassword=_useState8[0],setMessagePassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),errorLogin=_useState10[0],setErrorLogin=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showLoading=_useState12[0],setShowLoading=_useState12[1];var emailIsValid;var passwordIsValid;var _useRecoilValue=useRecoilValue(endpointState),urlEndpoint=_useRecoilValue.urlEndpoint;var urlEndpointLogin=\"\".concat(urlEndpoint,\"/auth\");var urlAccount=\"\".concat(urlEndpoint,\"/api/account\");function loginAccount(){checkInputEmail(email);checkPassword(password);if(emailIsValid&&passwordIsValid){setShowLoading(true);axios.post(urlEndpointLogin,{username:email,password:password}).then(function(response){var _response$data;setShowLoading(false);if(((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.access_token)!==''){var _response$data2;axios.get(urlAccount,{headers:{Authorization:\"Bearer \".concat((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.access_token)}}).then(function(responseAccount){// console.log(responseAccount.data.kyc);\nif(responseAccount.data.user_type!==1){setErrorLogin('');localStorage.setItem('token',response.data.access_token);localStorage.setItem('user_type',responseAccount.data.user_type);if(responseAccount.data.profile!==null&&responseAccount.data.kyc!==null&&responseAccount.data.kyc!=='pending'){localStorage.setItem('perfilCreate','1');localStorage.setItem('kyc','okay');if(responseAccount.data.user_type===2){history.push('/home-companions');}else if(responseAccount.data.user_type===3){history.push('/home-swing');}else if(responseAccount.data.user_type===4){history.push('/home-close-friends');}else if(responseAccount.data.user_type===5){history.push('/home-partners');}}else if(responseAccount.data.kyc===null){localStorage.setItem('perfilCreate','0');// localStorage.setItem('kyc', null);\nhistory.push('/documents');}else if(responseAccount.data.kyc==='pending'&&responseAccount.data.profile!==null){localStorage.setItem('perfilCreate','1');localStorage.setItem('kyc','pending');if(responseAccount.data.user_type===2){history.push('/home-companions');}else if(responseAccount.data.user_type===3){history.push('/home-swing');}else if(responseAccount.data.user_type===4){history.push('/home-close-friends');}else if(responseAccount.data.user_type===5){history.push('/home-partners');}}else if(responseAccount.data.kyc==='pending'&&responseAccount.data.profile===null){localStorage.setItem('perfilCreate','0');localStorage.setItem('kyc','pending');if(responseAccount.data.user_type===2){history.push('/home-companions');}else if(responseAccount.data.user_type===3){history.push('/home-swing');}else if(responseAccount.data.user_type===4){history.push('/home-close-friends');}else if(responseAccount.data.user_type===5){history.push('/home-partners');}}else if(responseAccount.data.kyc===null&&responseAccount.data.profile===null){localStorage.setItem('perfilCreate','0');// localStorage.setItem('kyc', null);\nhistory.push('/documents');}else if(responseAccount.data.kyc===null&&responseAccount.data.profile!==null){localStorage.setItem('perfilCreate','1');// localStorage.setItem('kyc', null);\nif(responseAccount.data.user_type===2){history.push('/home-companions');}else if(responseAccount.data.user_type===3){history.push('/home-swing');}else if(responseAccount.data.user_type===4){history.push('/home-close-friends');}else if(responseAccount.data.user_type===5){history.push('/home-partners');}}}else{setErrorLogin('E-mail ou senha incorreta');}});}else setErrorLogin('E-mail ou senha incorreta');}).catch(function(error){setErrorLogin('E-mail ou senha incorreta');setShowLoading(false);});}}function handleEmail(event){setEmail(event.target.value);}function handlePassword(event){setPassword(event.target.value);}function checkInputEmail(element){if(!validateEmail(element)||element===''){setErrorMessageEmail('E-mail inváldio');emailIsValid=false;}else if(validateEmail(element)){setErrorMessageEmail('');emailIsValid=true;}}function validateEmail(emailTest){var re=// eslint-disable-next-line\n/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(emailTest);}function checkPassword(element){if(element.length<6||element===''){setMessagePassword('Senha inválida');passwordIsValid=false;}else{setMessagePassword('');passwordIsValid=true;}}function loginEnter(event){if(event.key==='Enter'){loginAccount();}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-color-413872\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center logo-login-has-account pt-8 pb-14\",children:/*#__PURE__*/_jsx(Logo,{logoType:'white vertical',classes:'inline'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-register\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"descricao-home font-semibold text-color-413872\",children:\"Feliz em te ver (:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(Input,{name:'email_user',type:'email',placeholder:'E-mail',value:email,onChange:function onChange(event){return handleEmail(event);},onKeyPress:function onKeyPress(event){return loginEnter(event);}}),/*#__PURE__*/_jsx(\"span\",{className:\"ErrorLogin\",children:errorMessageEmail})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{name:'senha_user',type:'password',placeholder:'Senha',value:password,onChange:function onChange(event){return handlePassword(event);},onKeyPress:function onKeyPress(event){return loginEnter(event);}}),/*#__PURE__*/_jsx(\"span\",{className:\"ErrorLogin\",children:errorMessagePassword})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-right\",children:/*#__PURE__*/_jsx(Link,{to:'/reset',className:\"text-color-575757 font-size-13px\",children:\"Esqueci senha\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"ErrorLogin\",children:errorLogin})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-12\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-17px block w-full p-2 rounded-full text-center background-color-FF4767 text-white\",onClick:function onClick(){return loginAccount();},onKeyDown:function onKeyDown(){return loginAccount();},children:\"Entrar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-size-13px text-color-413872 \",children:[\"\\xC9 novo aqui?\",/*#__PURE__*/_jsxs(Link,{to:'/login',className:\"descricao-campo-checkbox-mobile\",children:[' ',\"Crie sua conta\"]})]})})]}),/*#__PURE__*/_jsx(Loading,{showLoading:showLoading})]});};export default LoginHasAccount;","map":{"version":3,"sources":["/home/clickc/www/click-company-main/src/pages/Login/LoginHasAccount.tsx"],"names":["axios","React","useState","Link","useRecoilValue","Input","Logo","endpointState","Loading","LoginHasAccount","history","email","setEmail","password","setPassword","errorMessageEmail","setErrorMessageEmail","errorMessagePassword","setMessagePassword","errorLogin","setErrorLogin","showLoading","setShowLoading","emailIsValid","passwordIsValid","urlEndpoint","urlEndpointLogin","urlAccount","loginAccount","checkInputEmail","checkPassword","post","username","then","response","data","access_token","get","headers","Authorization","responseAccount","user_type","localStorage","setItem","profile","kyc","push","catch","error","handleEmail","event","target","value","handlePassword","element","validateEmail","emailTest","re","test","length","loginEnter","key"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react';\nimport { Link, RouteComponentProps } from 'react-router-dom';\nimport { handleInputChange } from 'react-select/src/utils';\nimport { useRecoilValue } from 'recoil';\nimport Input from '../../components/Input/Input';\n\nimport Logo from '../../components/Logo/Logo';\nimport { endpointState } from '../../recoil/atoms';\nimport Loading from '../../components/Loading/Loading';\n\nconst LoginHasAccount: React.FC<RouteComponentProps> = ({ history }) => {\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\n\tconst [errorMessageEmail, setErrorMessageEmail] = useState('');\n\tconst [errorMessagePassword, setMessagePassword] = useState('');\n\tconst [errorLogin, setErrorLogin] = useState('');\n\tconst [showLoading, setShowLoading] = useState(false);\n\n\tlet emailIsValid: boolean;\n\tlet passwordIsValid: boolean;\n\n\tconst { urlEndpoint } = useRecoilValue(endpointState);\n\n\tconst urlEndpointLogin = `${urlEndpoint}/auth`;\n\tconst urlAccount = `${urlEndpoint}/api/account`;\n\n\tfunction loginAccount() {\n\t\tcheckInputEmail(email);\n\t\tcheckPassword(password);\n\n\t\tif (emailIsValid && passwordIsValid) {\n\t\t\tsetShowLoading(true);\n\t\t\taxios\n\t\t\t\t.post(urlEndpointLogin, {\n\t\t\t\t\tusername: email,\n\t\t\t\t\tpassword,\n\t\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\tsetShowLoading(false);\n\t\t\t\t\tif (response.data?.access_token !== '') {\n\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t.get(urlAccount, {\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\tAuthorization: `Bearer ${response.data?.access_token}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(responseAccount => {\n\t\t\t\t\t\t\t\t// console.log(responseAccount.data.kyc);\n\t\t\t\t\t\t\t\tif (responseAccount.data.user_type !== 1) {\n\t\t\t\t\t\t\t\t\tsetErrorLogin('');\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('token', response.data.access_token);\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t\t\t\t\t'user_type',\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.user_type,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.profile !== null &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc !== null &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc !== 'pending'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '1');\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('kyc', 'okay');\n\n\t\t\t\t\t\t\t\t\t\tif (responseAccount.data.user_type === 2) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-companions');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 3) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-swing');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 4) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-close-friends');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 5) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-partners');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.kyc === null) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '0');\n\t\t\t\t\t\t\t\t\t\t// localStorage.setItem('kyc', null);\n\t\t\t\t\t\t\t\t\t\thistory.push('/documents');\n\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc === 'pending' &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.profile !== null\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '1');\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('kyc', 'pending');\n\n\t\t\t\t\t\t\t\t\t\tif (responseAccount.data.user_type === 2) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-companions');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 3) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-swing');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 4) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-close-friends');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 5) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-partners');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc === 'pending' &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.profile === null\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '0');\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('kyc', 'pending');\n\n\t\t\t\t\t\t\t\t\t\tif (responseAccount.data.user_type === 2) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-companions');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 3) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-swing');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 4) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-close-friends');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 5) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-partners');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc === null &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.profile === null\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '0');\n\t\t\t\t\t\t\t\t\t\t// localStorage.setItem('kyc', null);\n\t\t\t\t\t\t\t\t\t\thistory.push('/documents');\n\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.kyc === null &&\n\t\t\t\t\t\t\t\t\t\tresponseAccount.data.profile !== null\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '1');\n\t\t\t\t\t\t\t\t\t\t// localStorage.setItem('kyc', null);\n\n\t\t\t\t\t\t\t\t\t\tif (responseAccount.data.user_type === 2) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-companions');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 3) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-swing');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 4) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-close-friends');\n\t\t\t\t\t\t\t\t\t\t} else if (responseAccount.data.user_type === 5) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/home-partners');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetErrorLogin('E-mail ou senha incorreta');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else setErrorLogin('E-mail ou senha incorreta');\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tsetErrorLogin('E-mail ou senha incorreta');\n\t\t\t\t\tsetShowLoading(false);\n\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction handleEmail(event: any) {\n\t\tsetEmail(event.target.value);\n\t}\n\n\tfunction handlePassword(event: any) {\n\t\tsetPassword(event.target.value);\n\t}\n\n\tfunction checkInputEmail(element: string) {\n\t\tif (!validateEmail(element) || element === '') {\n\t\t\tsetErrorMessageEmail('E-mail inváldio');\n\n\t\t\temailIsValid = false;\n\t\t} else if (validateEmail(element)) {\n\t\t\tsetErrorMessageEmail('');\n\n\t\t\temailIsValid = true;\n\t\t}\n\t}\n\n\tfunction validateEmail(emailTest: string) {\n\t\tconst re =\n\t\t\t// eslint-disable-next-line\n\t\t\t/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn re.test(emailTest);\n\t}\n\n\tfunction checkPassword(element: string) {\n\t\tif (element.length < 6 || element === '') {\n\t\t\tsetMessagePassword('Senha inválida');\n\n\t\t\tpasswordIsValid = false;\n\t\t} else {\n\t\t\tsetMessagePassword('');\n\n\t\t\tpasswordIsValid = true;\n\t\t}\n\t}\n\n\tfunction loginEnter(event: any) {\n\t\tif (event.key === 'Enter') {\n\t\t\tloginAccount();\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"background-color-413872\">\n\t\t\t\t<div className=\"text-center logo-login-has-account pt-8 pb-14\">\n\t\t\t\t\t<Logo logoType={'white vertical'} classes={'inline'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"body-register\">\n\t\t\t\t<div className=\"mt-8 text-center\">\n\t\t\t\t\t<h2 className=\"descricao-home font-semibold text-color-413872\">\n\t\t\t\t\t\tFeliz em te ver (:\n\t\t\t\t\t</h2>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'email_user'}\n\t\t\t\t\t\ttype={'email'}\n\t\t\t\t\t\tplaceholder={'E-mail'}\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(event: any) => handleEmail(event)}\n\t\t\t\t\t\tonKeyPress={(event: any) => loginEnter(event)}\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"ErrorLogin\">{errorMessageEmail}</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'senha_user'}\n\t\t\t\t\t\ttype={'password'}\n\t\t\t\t\t\tplaceholder={'Senha'}\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={(event: any) => handlePassword(event)}\n\t\t\t\t\t\tonKeyPress={(event: any) => loginEnter(event)}\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"ErrorLogin\">{errorMessagePassword}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-2 text-right\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={'/reset'}\n\t\t\t\t\t\tclassName=\"text-color-575757 font-size-13px\"\n\t\t\t\t\t>\n\t\t\t\t\t\tEsqueci senha\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span className=\"ErrorLogin\">{errorLogin}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-12\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"text-17px block w-full p-2 rounded-full text-center background-color-FF4767 text-white\"\n\t\t\t\t\t\tonClick={() => loginAccount()}\n\t\t\t\t\t\tonKeyDown={() => loginAccount()}\n\t\t\t\t\t>\n\t\t\t\t\t\tEntrar\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-8 text-center\">\n\t\t\t\t\t<p className=\"font-size-13px text-color-413872 \">\n\t\t\t\t\t\tÉ novo aqui?\n\t\t\t\t\t\t<Link to={'/login'} className=\"descricao-campo-checkbox-mobile\">\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\tCrie sua conta\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Loading showLoading={showLoading} />\n\t\t</div>\n\t);\n};\n\nexport default LoginHasAccount;\n"]},"metadata":{},"sourceType":"module"}