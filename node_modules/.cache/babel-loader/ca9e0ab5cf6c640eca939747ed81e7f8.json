{"ast":null,"code":"import _slicedToArray from\"/home/clickc/www/click-company-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import{useRecoilValue}from'recoil';import PacketCardBig from'../../components/PacketCard/PacketCardBig';import{endpointState}from'../../recoil/atoms';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signatures=function Signatures(){// const packets: packetsInterface[] = [\n// \t{\n// \t\tcabecalhoCard: 'Plano Premium',\n// \t\telementDescricao: (\n// \t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n// \t\t\t\t<p className=\"text-13px\" style={{color: '#413872', fontWeight: 600}}>10 dias de anúncio</p>\n// \t\t\t</div>\n// \t\t),\n// \t\tlabelInicio: '20/10/2020',\n// \t\tlabelFim: '30/10/2020',\n// \t\tlabelPreco: 'R$ 105,00',\n// \t}\n// ];\nvar _useRecoilValue=useRecoilValue(endpointState),urlEndpoint=_useRecoilValue.urlEndpoint;var urlOrderUser=\"\".concat(urlEndpoint,\"/api/checkout/order/user\");var token=localStorage.getItem('token');var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),packets=_useState2[0],setPackets=_useState2[1];useEffect(function(){axios.get(urlOrderUser,{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(responseOrderUser){var newPackets=[];responseOrderUser.data.forEach(function(order){var _order$product,_order$product2,_order$product3,_order$product4,_order$product5,_order$product6;var dataInicio=new Date(order.updated_at);var dataFim=new Date(order.expired_at);var pendingRefused=order.status==='refused'?'Negado':'Pendente';newPackets.push({cabecalhoCard:\"\".concat((_order$product=order.product)===null||_order$product===void 0?void 0:_order$product.title,\" \").concat((_order$product2=order.product)===null||_order$product2===void 0?void 0:_order$product2.type_name),elementDescricao:/*#__PURE__*/_jsx(\"div\",{className:\"bloco-descricao-card-packets text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-13px\",style:{color:'#413872',fontWeight:600},children:[\"\".concat((_order$product3=order.product)===null||_order$product3===void 0?void 0:_order$product3.days,\" dias de an\\xFAncio\"),/*#__PURE__*/_jsx(\"br\",{}),!(((_order$product4=order.product)===null||_order$product4===void 0?void 0:_order$product4.free_days)===null||((_order$product5=order.product)===null||_order$product5===void 0?void 0:_order$product5.free_days)===0)?\"\".concat((_order$product6=order.product)===null||_order$product6===void 0?void 0:_order$product6.free_days,\" dias adicionais\"):'']})}),labelInicio:dataInicio.toLocaleDateString(),labelFim:order.status==='ok'?dataFim.toLocaleDateString():pendingRefused,labelPreco:(order.value/100).toLocaleString('pt-br',{style:'currency',currency:'BRL'})});setPackets(newPackets);});}).catch(function(error){handleLogOut();history.push('/home');});},[]);function handleLogOut(){localStorage.removeItem('token');localStorage.removeItem('user_type');localStorage.removeItem('perfilCreate');localStorage.removeItem('kyc');}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cabecalho-register text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Assinatura\",/*#__PURE__*/_jsx(Link,{to:'/perfil',className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-register pt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-adicione-info-2 flex justify-center mb-6 mr-20 ml-20\",children:\"Aqui voc\\xEA pode conferir suas compras\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:packets.map(function(packet){return/*#__PURE__*/_jsx(PacketCardBig,{cabecalhoCard:packet.cabecalhoCard,elementDescricao:packet.elementDescricao,labelInicio:packet.labelInicio,labelFim:packet.labelFim,labelPreco:packet.labelPreco});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-register\",children:/*#__PURE__*/_jsx(Link,{to:'/perfil',className:\"block w-full p-2 rounded-full text-center bg-white\",children:\"Voltar\"})})]});};export default Signatures;","map":{"version":3,"names":["axios","React","useEffect","useState","Link","useHistory","useRecoilValue","PacketCardBig","endpointState","jsx","_jsx","jsxs","_jsxs","Signatures","_useRecoilValue","urlEndpoint","urlOrderUser","concat","token","localStorage","getItem","history","_useState","_useState2","_slicedToArray","packets","setPackets","get","headers","Authorization","then","responseOrderUser","newPackets","data","forEach","order","_order$product","_order$product2","_order$product3","_order$product4","_order$product5","_order$product6","dataInicio","Date","updated_at","dataFim","expired_at","pendingRefused","status","push","cabecalhoCard","product","title","type_name","elementDescricao","className","children","style","color","fontWeight","days","free_days","labelInicio","toLocaleDateString","labelFim","labelPreco","value","toLocaleString","currency","catch","error","handleLogOut","removeItem","to","map","packet"],"sources":["/home/clickc/www/click-company-main/src/pages/Perfil/Signatures.tsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport { JsxElement } from 'typescript';\nimport PacketCardBig from '../../components/PacketCard/PacketCardBig';\nimport { endpointState } from '../../recoil/atoms';\n\nconst Signatures: React.FC = () => {\n\tinterface packetsInterface {\n\t\tcabecalhoCard: string;\n\t\telementDescricao: any;\n\t\tlabelInicio: string;\n\t\tlabelFim: string;\n\t\tlabelPreco: string;\n\t}\n\t// const packets: packetsInterface[] = [\n\t// \t{\n\t// \t\tcabecalhoCard: 'Plano Premium',\n\t// \t\telementDescricao: (\n\t// \t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n\t// \t\t\t\t<p className=\"text-13px\" style={{color: '#413872', fontWeight: 600}}>10 dias de anúncio</p>\n\t// \t\t\t</div>\n\t// \t\t),\n\t// \t\tlabelInicio: '20/10/2020',\n\t// \t\tlabelFim: '30/10/2020',\n\t// \t\tlabelPreco: 'R$ 105,00',\n\t// \t}\n\t// ];\n\n\tconst { urlEndpoint } = useRecoilValue(endpointState);\n\tconst urlOrderUser = `${urlEndpoint}/api/checkout/order/user`;\n\tconst token = localStorage.getItem('token');\n\n\tconst history = useHistory();\n\n\tconst [packets, setPackets] = useState<packetsInterface[]>([]);\n\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.get(urlOrderUser, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(responseOrderUser => {\n\t\t\t\tconst newPackets: packetsInterface[] = [];\n\t\t\t\tresponseOrderUser.data.forEach((order: any) => {\n\t\t\t\t\tconst dataInicio = new Date(order.updated_at);\n\t\t\t\t\tconst dataFim = new Date(order.expired_at);\n\t\t\t\t\tconst pendingRefused =\n\t\t\t\t\t\torder.status === 'refused' ? 'Negado' : 'Pendente';\n\n\t\t\t\t\tnewPackets.push({\n\t\t\t\t\t\tcabecalhoCard: `${order.product?.title} ${order.product?.type_name}`,\n\t\t\t\t\t\telementDescricao: (\n\t\t\t\t\t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tclassName=\"text-13px\"\n\t\t\t\t\t\t\t\t\tstyle={{ color: '#413872', fontWeight: 600 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{`${order.product?.days} dias de anúncio`}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{!(\n\t\t\t\t\t\t\t\t\t\torder.product?.free_days === null ||\n\t\t\t\t\t\t\t\t\t\torder.product?.free_days === 0\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t? `${order.product?.free_days} dias adicionais`\n\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlabelInicio: dataInicio.toLocaleDateString(),\n\t\t\t\t\t\tlabelFim:\n\t\t\t\t\t\t\torder.status === 'ok'\n\t\t\t\t\t\t\t\t? dataFim.toLocaleDateString()\n\t\t\t\t\t\t\t\t: pendingRefused,\n\t\t\t\t\t\tlabelPreco: (order.value / 100).toLocaleString('pt-br', {\n\t\t\t\t\t\t\tstyle: 'currency',\n\t\t\t\t\t\t\tcurrency: 'BRL',\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\n\t\t\t\t\tsetPackets(newPackets);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleLogOut();\n\t\t\t\thistory.push('/home');\n\t\t\t});\n\t}, []);\n\n\tfunction handleLogOut() {\n\t\tlocalStorage.removeItem('token');\n\t\tlocalStorage.removeItem('user_type');\n\t\tlocalStorage.removeItem('perfilCreate');\n\t\tlocalStorage.removeItem('kyc');\n\t}\n\n\treturn (\n\t\t<div className=\"bg-white\">\n\t\t\t<div className=\"cabecalho-register text-center\">\n\t\t\t\t<p>\n\t\t\t\t\tAssinatura\n\t\t\t\t\t<Link to={'/perfil'} className=\"float-right\">\n\t\t\t\t\t\t<i className=\"fas fa-times\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"body-register pt-5\">\n\t\t\t\t<div className=\"text-adicione-info-2 flex justify-center mb-6 mr-20 ml-20\">\n\t\t\t\t\tAqui você pode conferir suas compras\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t{packets.map((packet: packetsInterface) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<PacketCardBig\n\t\t\t\t\t\t\t\tcabecalhoCard={packet.cabecalhoCard}\n\t\t\t\t\t\t\t\telementDescricao={packet.elementDescricao}\n\t\t\t\t\t\t\t\tlabelInicio={packet.labelInicio}\n\t\t\t\t\t\t\t\tlabelFim={packet.labelFim}\n\t\t\t\t\t\t\t\tlabelPreco={packet.labelPreco}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"footer-register\">\n\t\t\t\t<Link\n\t\t\t\t\tto={'/perfil'}\n\t\t\t\t\tclassName=\"block w-full p-2 rounded-full text-center bg-white\"\n\t\t\t\t>\n\t\t\t\t\tVoltar\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Signatures;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}