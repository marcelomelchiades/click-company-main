{"ast":null,"code":"import _slicedToArray from\"/home/clickc/www/click-company-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import axios from'axios';import React,{useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import{useRecoilValue}from'recoil';import PacketCardBig from'../../components/PacketCard/PacketCardBig';import{endpointState}from'../../recoil/atoms';var Signatures=function Signatures(){// const packets: packetsInterface[] = [\n// \t{\n// \t\tcabecalhoCard: 'Plano Premium',\n// \t\telementDescricao: (\n// \t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n// \t\t\t\t<p className=\"text-13px\" style={{color: '#413872', fontWeight: 600}}>10 dias de anúncio</p>\n// \t\t\t</div>\n// \t\t),\n// \t\tlabelInicio: '20/10/2020',\n// \t\tlabelFim: '30/10/2020',\n// \t\tlabelPreco: 'R$ 105,00',\n// \t}\n// ];\nvar _useRecoilValue=useRecoilValue(endpointState),urlEndpoint=_useRecoilValue.urlEndpoint;var urlOrderUser=\"\".concat(urlEndpoint,\"/api/checkout/order/user\");var token=localStorage.getItem('token');var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),packets=_useState2[0],setPackets=_useState2[1];useEffect(function(){axios.get(urlOrderUser,{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(responseOrderUser){var newPackets=[];responseOrderUser.data.forEach(function(order){var _order$product,_order$product2,_order$product3,_order$product4,_order$product5,_order$product6;var dataInicio=new Date(order.updated_at);var dataFim=new Date(order.expired_at);var pendingRefused=order.status==='refused'?'Negado':'Pendente';newPackets.push({cabecalhoCard:\"\".concat((_order$product=order.product)===null||_order$product===void 0?void 0:_order$product.title,\" \").concat((_order$product2=order.product)===null||_order$product2===void 0?void 0:_order$product2.type_name),elementDescricao:/*#__PURE__*/_jsx(\"div\",{className:\"bloco-descricao-card-packets text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-13px\",style:{color:'#413872',fontWeight:600},children:[\"\".concat((_order$product3=order.product)===null||_order$product3===void 0?void 0:_order$product3.days,\" dias de an\\xFAncio\"),/*#__PURE__*/_jsx(\"br\",{}),!(((_order$product4=order.product)===null||_order$product4===void 0?void 0:_order$product4.free_days)===null||((_order$product5=order.product)===null||_order$product5===void 0?void 0:_order$product5.free_days)===0)?\"\".concat((_order$product6=order.product)===null||_order$product6===void 0?void 0:_order$product6.free_days,\" dias adicionais\"):'']})}),labelInicio:dataInicio.toLocaleDateString(),labelFim:order.status==='ok'?dataFim.toLocaleDateString():pendingRefused,labelPreco:(order.value/100).toLocaleString('pt-br',{style:'currency',currency:'BRL'})});setPackets(newPackets);});}).catch(function(error){handleLogOut();history.push('/home');});},[]);function handleLogOut(){localStorage.removeItem('token');localStorage.removeItem('user_type');localStorage.removeItem('perfilCreate');localStorage.removeItem('kyc');}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cabecalho-register text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Assinatura\",/*#__PURE__*/_jsx(Link,{to:'/perfil',className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-register pt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-adicione-info-2 flex justify-center mb-6 mr-20 ml-20\",children:\"Aqui voc\\xEA pode conferir suas compras\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:packets.map(function(packet){return/*#__PURE__*/_jsx(PacketCardBig,{cabecalhoCard:packet.cabecalhoCard,elementDescricao:packet.elementDescricao,labelInicio:packet.labelInicio,labelFim:packet.labelFim,labelPreco:packet.labelPreco});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-register\",children:/*#__PURE__*/_jsx(Link,{to:'/perfil',className:\"block w-full p-2 rounded-full text-center bg-white\",children:\"Voltar\"})})]});};export default Signatures;","map":{"version":3,"sources":["/home/clickc/www/click-company-main/src/pages/Perfil/Signatures.tsx"],"names":["axios","React","useEffect","useState","Link","useHistory","useRecoilValue","PacketCardBig","endpointState","Signatures","urlEndpoint","urlOrderUser","token","localStorage","getItem","history","packets","setPackets","get","headers","Authorization","then","responseOrderUser","newPackets","data","forEach","order","dataInicio","Date","updated_at","dataFim","expired_at","pendingRefused","status","push","cabecalhoCard","product","title","type_name","elementDescricao","color","fontWeight","days","free_days","labelInicio","toLocaleDateString","labelFim","labelPreco","value","toLocaleString","style","currency","catch","error","handleLogOut","removeItem","map","packet"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport { JsxElement } from 'typescript';\nimport PacketCardBig from '../../components/PacketCard/PacketCardBig';\nimport { endpointState } from '../../recoil/atoms';\n\nconst Signatures: React.FC = () => {\n\tinterface packetsInterface {\n\t\tcabecalhoCard: string;\n\t\telementDescricao: any;\n\t\tlabelInicio: string;\n\t\tlabelFim: string;\n\t\tlabelPreco: string;\n\t}\n\t// const packets: packetsInterface[] = [\n\t// \t{\n\t// \t\tcabecalhoCard: 'Plano Premium',\n\t// \t\telementDescricao: (\n\t// \t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n\t// \t\t\t\t<p className=\"text-13px\" style={{color: '#413872', fontWeight: 600}}>10 dias de anúncio</p>\n\t// \t\t\t</div>\n\t// \t\t),\n\t// \t\tlabelInicio: '20/10/2020',\n\t// \t\tlabelFim: '30/10/2020',\n\t// \t\tlabelPreco: 'R$ 105,00',\n\t// \t}\n\t// ];\n\n\tconst { urlEndpoint } = useRecoilValue(endpointState);\n\tconst urlOrderUser = `${urlEndpoint}/api/checkout/order/user`;\n\tconst token = localStorage.getItem('token');\n\n\tconst history = useHistory();\n\n\tconst [packets, setPackets] = useState<packetsInterface[]>([]);\n\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.get(urlOrderUser, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(responseOrderUser => {\n\t\t\t\tconst newPackets: packetsInterface[] = [];\n\t\t\t\tresponseOrderUser.data.forEach((order: any) => {\n\t\t\t\t\tconst dataInicio = new Date(order.updated_at);\n\t\t\t\t\tconst dataFim = new Date(order.expired_at);\n\t\t\t\t\tconst pendingRefused =\n\t\t\t\t\t\torder.status === 'refused' ? 'Negado' : 'Pendente';\n\n\t\t\t\t\tnewPackets.push({\n\t\t\t\t\t\tcabecalhoCard: `${order.product?.title} ${order.product?.type_name}`,\n\t\t\t\t\t\telementDescricao: (\n\t\t\t\t\t\t\t<div className=\"bloco-descricao-card-packets text-center\">\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tclassName=\"text-13px\"\n\t\t\t\t\t\t\t\t\tstyle={{ color: '#413872', fontWeight: 600 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{`${order.product?.days} dias de anúncio`}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{!(\n\t\t\t\t\t\t\t\t\t\torder.product?.free_days === null ||\n\t\t\t\t\t\t\t\t\t\torder.product?.free_days === 0\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t? `${order.product?.free_days} dias adicionais`\n\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlabelInicio: dataInicio.toLocaleDateString(),\n\t\t\t\t\t\tlabelFim:\n\t\t\t\t\t\t\torder.status === 'ok'\n\t\t\t\t\t\t\t\t? dataFim.toLocaleDateString()\n\t\t\t\t\t\t\t\t: pendingRefused,\n\t\t\t\t\t\tlabelPreco: (order.value / 100).toLocaleString('pt-br', {\n\t\t\t\t\t\t\tstyle: 'currency',\n\t\t\t\t\t\t\tcurrency: 'BRL',\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\n\t\t\t\t\tsetPackets(newPackets);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleLogOut();\n\t\t\t\thistory.push('/home');\n\t\t\t});\n\t}, []);\n\n\tfunction handleLogOut() {\n\t\tlocalStorage.removeItem('token');\n\t\tlocalStorage.removeItem('user_type');\n\t\tlocalStorage.removeItem('perfilCreate');\n\t\tlocalStorage.removeItem('kyc');\n\t}\n\n\treturn (\n\t\t<div className=\"bg-white\">\n\t\t\t<div className=\"cabecalho-register text-center\">\n\t\t\t\t<p>\n\t\t\t\t\tAssinatura\n\t\t\t\t\t<Link to={'/perfil'} className=\"float-right\">\n\t\t\t\t\t\t<i className=\"fas fa-times\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"body-register pt-5\">\n\t\t\t\t<div className=\"text-adicione-info-2 flex justify-center mb-6 mr-20 ml-20\">\n\t\t\t\t\tAqui você pode conferir suas compras\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t{packets.map((packet: packetsInterface) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<PacketCardBig\n\t\t\t\t\t\t\t\tcabecalhoCard={packet.cabecalhoCard}\n\t\t\t\t\t\t\t\telementDescricao={packet.elementDescricao}\n\t\t\t\t\t\t\t\tlabelInicio={packet.labelInicio}\n\t\t\t\t\t\t\t\tlabelFim={packet.labelFim}\n\t\t\t\t\t\t\t\tlabelPreco={packet.labelPreco}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"footer-register\">\n\t\t\t\t<Link\n\t\t\t\t\tto={'/perfil'}\n\t\t\t\t\tclassName=\"block w-full p-2 rounded-full text-center bg-white\"\n\t\t\t\t>\n\t\t\t\t\tVoltar\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Signatures;\n"]},"metadata":{},"sourceType":"module"}