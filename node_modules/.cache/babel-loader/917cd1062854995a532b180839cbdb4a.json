{"ast":null,"code":"import _slicedToArray from\"/home/clickc/www/click-company-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import'swiper/swiper-bundle.css';import{useRecoilValue}from'recoil';import{endpointState}from'../../recoil/atoms';import Input from'../../components/Input/Input';import Logo from'../../components/Logo/Logo';import Loading from'../../components/Loading/Loading';var HomePartner=function HomePartner(){var styleDivImgCampaign={width:'100%',paddingTop:'50%',position:'relative'};var styleImgCampaign={width:'100%',height:'100%',position:'absolute',left:0,top:0,objectFit:'cover',objectPosition:'center'};var _useRecoilValue=useRecoilValue(endpointState),urlEndpoint=_useRecoilValue.urlEndpoint,urlEndpointEstados=_useRecoilValue.urlEndpointEstados;var urlEndpointParceiros=\"\".concat(urlEndpoint,\"/api/partner/campaign\");var urlEndpointCategories=\"\".concat(urlEndpoint,\"/api/profile/categories-partner/list\");var _useState=useState(true),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),estadoSelect=_useState4[0],setEstadoSelect=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cidadeSelect=_useState6[0],setCidadeSelect=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categoriaSelect=_useState8[0],setCategoriaSelect=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),categoria1=_useState10[0],setCategoria1=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cardsPartners=_useState12[0],setCardsPartners=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),city=_useState14[0],setCity=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),neighborhood=_useState16[0],setNeighborhood=_useState16[1];var newCardsPartners=[];useEffect(function(){var _localStorage$getItem;searchPartners();setSelectsAxiosIbge('estados');setSelectsAxiosIbge('cidades',(_localStorage$getItem=localStorage.getItem('estado'))===null||_localStorage$getItem===void 0?void 0:_localStorage$getItem.toString());if(localStorage.getItem('estado')===null){localStorage.setItem('estado','33');}axios.get(urlEndpointCategories).then(function(response){var categories=[];response.data.data.forEach(function(categoria){categories.push({label:categoria.name,value:categoria.id});});setCategoriaSelect(categories);});},[]);var searchPartners=function searchPartners(){setCardsPartners([]);setShowLoading(true);axios.get(urlEndpointParceiros,{params:{state:localStorage.getItem('estadoName'),category_id:categoria1,distinct:'true'}}).then(function(response){if(response.data.data.length>0){var newCampaigns=[];response.data.data.forEach(function(campaignResponse){newCampaigns.push({img:campaignResponse.banner!==''?\"https://zapgrupos-bucket.s3.us-west-2.amazonaws.com/\".concat(campaignResponse.banner):'',url:campaignResponse.target_url,userId:campaignResponse.user_id});});setCardsPartners(newCampaigns);console.log(newCampaigns);}setShowLoading(false);});};var setSelectsAxiosIbge=function setSelectsAxiosIbge(){var tipoEstadoCidade=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'estados';var idEstado=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'33';var url={estados:urlEndpointEstados,cidades:\"\".concat(urlEndpointEstados).concat(idEstado,\"/municipios\")};var setSelect={estados:setEstadoSelect,cidades:setCidadeSelect};var orderByName={estados:'sigla',cidades:'nome'};axios.get(url[tipoEstadoCidade],{// headers: {\n// \tAuthorization: `Bearer ${token}`,\n// },\n}).then(function(response){if(response.data.length>0){var newValue=[];var cidadesEstados=response.data.sort(function(a,b){return a[orderByName[tipoEstadoCidade]]>b[orderByName[tipoEstadoCidade]]?1:-1;});response.data.forEach(function(element){if(tipoEstadoCidade==='estados'){if(element.id===33){newValue.push({label:element[orderByName[tipoEstadoCidade]],value:element.id});}}else{newValue.push({label:element[orderByName[tipoEstadoCidade]],value:element.id});}});setSelect[tipoEstadoCidade]([]);setSelect[tipoEstadoCidade](newValue);setCity('');}else{setSelect[tipoEstadoCidade]([]);}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"background-color-413872\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"padding-sides-20px relative text-center py-4\",children:[/*#__PURE__*/_jsx(Link,{to:'/perfil',children:/*#__PURE__*/_jsxs(\"div\",{className:\"icone-user-with-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icone-user\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-user\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"icone-menu\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars\"})})]})}),/*#__PURE__*/_jsx(Logo,{logoType:'white horizontal',classes:'inline w-200px'}),/*#__PURE__*/_jsx(\"div\",{className:\"search-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"icone-search\",children:/*#__PURE__*/_jsx(\"select\",{name:\"estado\",id:\"estado\",onChange:function onChange(event){localStorage.setItem('estado',event.target.value);localStorage.setItem('estadoName',event.target.options[event.target.selectedIndex].text);setSelectsAxiosIbge('cidades',event.target.value);searchPartners();},children:estadoSelect.map(function(state){var _localStorage$getItem2;return/*#__PURE__*/_jsx(\"option\",{value:state.value,selected:((_localStorage$getItem2=localStorage.getItem('estado'))===null||_localStorage$getItem2===void 0?void 0:_localStorage$getItem2.toString())===state.value.toString(),children:state.label});})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"padding-sides-20px bg-white pt-2 pb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 mt-2\",children:/*#__PURE__*/_jsx(Input,{name:\"categorias\",type:\"select\",placeholder:\"Selecione uma categoria\",valueSelect:categoriaSelect,value:categoria1,onChange:function onChange(e){setCategoria1(e.currentTarget.value);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return searchPartners();},className:\"mt-4 mb-4 block w-full p-2 rounded-full text-center pesquisar-acompanhante text-white font-bold\",children:\"Pesquisar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"Parceiros\"})}),/*#__PURE__*/_jsx(Loading,{showLoading:showLoading,className:\"loading-center\"}),showLoading===true?'':/*#__PURE__*/_jsxs(\"div\",{children:[cardsPartners.length===0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Parceiros n\\xE3o encontrados\"})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4 py-2\",children:cardsPartners.map(function(campaign){return campaign.url!==''?/*#__PURE__*/_jsx(\"div\",{style:styleDivImgCampaign,children:/*#__PURE__*/_jsx(Link,{to:\"/perfil-partner/\".concat(campaign.userId),children:/*#__PURE__*/_jsx(\"img\",{style:styleImgCampaign,src:campaign.img,alt:\"\"})})}):/*#__PURE__*/_jsx(\"div\",{style:styleDivImgCampaign,children:/*#__PURE__*/_jsx(\"img\",{style:styleImgCampaign,src:campaign.img,alt:\"\"})});})})]})]})]});};export default HomePartner;","map":{"version":3,"sources":["/home/clickc/www/click-company-main/src/pages/Home/HomePartners.tsx"],"names":["React","useEffect","useState","axios","Link","useRecoilValue","endpointState","Input","Logo","Loading","HomePartner","styleDivImgCampaign","width","paddingTop","position","styleImgCampaign","height","left","top","objectFit","objectPosition","urlEndpoint","urlEndpointEstados","urlEndpointParceiros","urlEndpointCategories","showLoading","setShowLoading","estadoSelect","setEstadoSelect","cidadeSelect","setCidadeSelect","categoriaSelect","setCategoriaSelect","categoria1","setCategoria1","cardsPartners","setCardsPartners","city","setCity","neighborhood","setNeighborhood","newCardsPartners","searchPartners","setSelectsAxiosIbge","localStorage","getItem","toString","setItem","get","then","response","categories","data","forEach","categoria","push","label","name","value","id","params","state","category_id","distinct","length","newCampaigns","campaignResponse","img","banner","url","target_url","userId","user_id","console","log","tipoEstadoCidade","idEstado","estados","cidades","setSelect","orderByName","newValue","cidadesEstados","sort","a","b","element","event","target","options","selectedIndex","text","map","e","currentTarget","campaign"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport 'swiper/swiper-bundle.css';\nimport { useRecoilValue } from 'recoil';\nimport { endpointState } from '../../recoil/atoms';\nimport Input from '../../components/Input/Input';\n\nimport Logo from '../../components/Logo/Logo';\nimport Loading from '../../components/Loading/Loading';\nimport CampaignsCarousel from '../../components/CampaignsCarousel/CampaignsCarousel';\n\nconst HomePartner: React.FC = () => {\n\ttype typeResponseAxios = {\n\t\t[key: string]: any;\n\t};\n\n\ttype selectValues = {\n\t\tlabel: string;\n\t\tvalue: string;\n\t}[];\n\n\ttype typeCardsPartners = {\n\t\turl: string;\n\t\timg: string;\n\t\tuserId: string;\n\t}[];\n\n\tconst styleDivImgCampaign: React.CSSProperties = {\n\t\twidth: '100%',\n\t\tpaddingTop: '50%',\n\t\tposition: 'relative',\n\t};\n\n\tconst styleImgCampaign: React.CSSProperties = {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tposition: 'absolute',\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tobjectFit: 'cover',\n\t\tobjectPosition: 'center',\n\t};\n\n\tconst { urlEndpoint, urlEndpointEstados } = useRecoilValue(endpointState);\n\n\tconst urlEndpointParceiros = `${urlEndpoint}/api/partner/campaign`;\n\tconst urlEndpointCategories = `${urlEndpoint}/api/profile/categories-partner/list`;\n\n\tconst [showLoading, setShowLoading] = useState(true);\n\n\tconst [estadoSelect, setEstadoSelect] = useState<selectValues>([]);\n\tconst [cidadeSelect, setCidadeSelect] = useState<selectValues>([]);\n\n\tconst [categoriaSelect, setCategoriaSelect] = useState([]);\n\tconst [categoria1, setCategoria1] = useState('');\n\n\tconst [cardsPartners, setCardsPartners] = useState<typeCardsPartners>([]);\n\n\tconst [city, setCity] = useState('');\n\tconst [neighborhood, setNeighborhood] = useState('');\n\n\tconst newCardsPartners: typeCardsPartners = [];\n\n\tuseEffect(() => {\n\t\tsearchPartners();\n\t\tsetSelectsAxiosIbge('estados');\n\t\tsetSelectsAxiosIbge('cidades', localStorage.getItem('estado')?.toString());\n\t\tif (localStorage.getItem('estado') === null) {\n\t\t\tlocalStorage.setItem('estado', '33');\n\t\t}\n\n\t\taxios.get(urlEndpointCategories).then(response => {\n\t\t\tconst categories: any = [];\n\t\t\tresponse.data.data.forEach((categoria: any) => {\n\t\t\t\tcategories.push({ label: categoria.name, value: categoria.id });\n\t\t\t});\n\t\t\tsetCategoriaSelect(categories);\n\t\t});\n\t}, []);\n\n\tconst searchPartners = () => {\n\t\tsetCardsPartners([]);\n\t\tsetShowLoading(true);\n\n\t\taxios\n\t\t\t.get(urlEndpointParceiros, {\n\t\t\t\tparams: {\n\t\t\t\t\tstate: localStorage.getItem('estadoName'),\n\t\t\t\t\tcategory_id: categoria1,\n\t\t\t\t\tdistinct: 'true'\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(function (response: typeResponseAxios) {\n\t\t\t\tif (response.data.data.length > 0) {\n\t\t\t\t\tconst newCampaigns: any[] = [];\n\t\t\t\t\tresponse.data.data.forEach((campaignResponse: any) => {\n\t\t\t\t\t\tnewCampaigns.push({\n\t\t\t\t\t\t\timg:\n\t\t\t\t\t\t\t\tcampaignResponse.banner !== ''\n\t\t\t\t\t\t\t\t\t? `https://zapgrupos-bucket.s3.us-west-2.amazonaws.com/${campaignResponse.banner}`\n\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\turl: campaignResponse.target_url,\n\t\t\t\t\t\t\tuserId: campaignResponse.user_id,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tsetCardsPartners(newCampaigns);\n\t\t\t\t\tconsole.log(newCampaigns);\n\t\t\t\t}\n\n\t\t\t\tsetShowLoading(false);\n\t\t\t});\n\t};\n\n\tconst setSelectsAxiosIbge = (\n\t\ttipoEstadoCidade: 'estados' | 'cidades' = 'estados',\n\t\tidEstado = '33',\n\t) => {\n\t\tconst url = {\n\t\t\testados: urlEndpointEstados,\n\t\t\tcidades: `${urlEndpointEstados}${idEstado}/municipios`,\n\t\t};\n\n\t\tconst setSelect = {\n\t\t\testados: setEstadoSelect,\n\t\t\tcidades: setCidadeSelect,\n\t\t};\n\n\t\tconst orderByName = {\n\t\t\testados: 'sigla',\n\t\t\tcidades: 'nome',\n\t\t};\n\n\t\taxios\n\t\t\t.get(url[tipoEstadoCidade], {\n\t\t\t\t// headers: {\n\t\t\t\t// \tAuthorization: `Bearer ${token}`,\n\t\t\t\t// },\n\t\t\t})\n\t\t\t.then(function (response: typeResponseAxios) {\n\t\t\t\tif (response.data.length > 0) {\n\t\t\t\t\tconst newValue: selectValues = [];\n\n\t\t\t\t\tconst cidadesEstados = response.data.sort((a: any, b: any) =>\n\t\t\t\t\t\ta[orderByName[tipoEstadoCidade]] > b[orderByName[tipoEstadoCidade]]\n\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t: -1,\n\t\t\t\t\t);\n\n\t\t\t\t\tresponse.data.forEach((element: any) => {\n\t\t\t\t\t\tif (tipoEstadoCidade === 'estados') {\n\t\t\t\t\t\t\tif (element.id === 33) {\n\t\t\t\t\t\t\t\tnewValue.push({\n\t\t\t\t\t\t\t\t\tlabel: element[orderByName[tipoEstadoCidade]],\n\t\t\t\t\t\t\t\t\tvalue: element.id,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewValue.push({\n\t\t\t\t\t\t\t\tlabel: element[orderByName[tipoEstadoCidade]],\n\t\t\t\t\t\t\t\tvalue: element.id,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tsetSelect[tipoEstadoCidade]([]);\n\t\t\t\t\tsetSelect[tipoEstadoCidade](newValue);\n\t\t\t\t\tsetCity('');\n\t\t\t\t} else {\n\t\t\t\t\tsetSelect[tipoEstadoCidade]([]);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"background-color-413872\">\n\t\t\t<div className=\"padding-sides-20px relative text-center py-4\">\n\t\t\t\t<Link to={'/perfil'}>\n\t\t\t\t\t<div className=\"icone-user-with-menu\">\n\t\t\t\t\t\t<div className=\"icone-user\">\n\t\t\t\t\t\t\t<i className=\"far fa-user\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"icone-menu\">\n\t\t\t\t\t\t\t<i className=\"fas fa-bars\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\n\t\t\t\t<Logo logoType={'white horizontal'} classes={'inline w-200px'} />\n\n\t\t\t\t<div className=\"search-menu\">\n\t\t\t\t\t<div className=\"icone-search\">\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"estado\"\n\t\t\t\t\t\t\tid=\"estado\"\n\t\t\t\t\t\t\tonChange={(event: any) => {\n\t\t\t\t\t\t\t\tlocalStorage.setItem('estado', event.target.value);\n\t\t\t\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t\t\t\t'estadoName',\n\t\t\t\t\t\t\t\t\tevent.target.options[event.target.selectedIndex].text,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetSelectsAxiosIbge('cidades', event.target.value);\n\t\t\t\t\t\t\t\tsearchPartners();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{estadoSelect.map(state => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tvalue={state.value}\n\t\t\t\t\t\t\t\t\t\tselected={\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem('estado')?.toString() ===\n\t\t\t\t\t\t\t\t\t\t\tstate.value.toString()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{state.label}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"padding-sides-20px bg-white pt-2 pb-6\">\n\t\t\t\t<div className=\"grid grid-cols-1 gap-4 mt-2\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname=\"categorias\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\tplaceholder=\"Selecione uma categoria\"\n\t\t\t\t\t\tvalueSelect={categoriaSelect}\n\t\t\t\t\t\tvalue={categoria1}\n\t\t\t\t\t\tonChange={(e: any) => {\n\t\t\t\t\t\t\tsetCategoria1(e.currentTarget.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => searchPartners()}\n\t\t\t\t\tclassName=\"mt-4 mb-4 block w-full p-2 rounded-full text-center pesquisar-acompanhante text-white font-bold\"\n\t\t\t\t>\n\t\t\t\t\tPesquisar\n\t\t\t\t</button>\n\t\t\t\t<div className=\"py-2\">\n\t\t\t\t\t<p className=\"font-bold\">Parceiros</p>\n\t\t\t\t</div>\n\t\t\t\t<Loading showLoading={showLoading} className=\"loading-center\" />\n\t\t\t\t{showLoading === true ? (\n\t\t\t\t\t''\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{cardsPartners.length === 0 ? (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h1>Parceiros não encontrados</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4 py-2\">\n\t\t\t\t\t\t\t{cardsPartners.map(campaign => {\n\t\t\t\t\t\t\t\treturn campaign.url !== '' ? (\n\t\t\t\t\t\t\t\t\t<div style={styleDivImgCampaign}>\n\t\t\t\t\t\t\t\t\t\t<Link to={`/perfil-partner/${campaign.userId}`}>\n\t\t\t\t\t\t\t\t\t\t\t<img style={styleImgCampaign} src={campaign.img} alt=\"\" />\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div style={styleDivImgCampaign}>\n\t\t\t\t\t\t\t\t\t\t<img style={styleImgCampaign} src={campaign.img} alt=\"\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default HomePartner;\n"]},"metadata":{},"sourceType":"module"}