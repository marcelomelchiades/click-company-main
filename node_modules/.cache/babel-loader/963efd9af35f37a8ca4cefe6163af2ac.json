{"ast":null,"code":"import _slicedToArray from\"/home/clickc/www/click-company-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import axios from'axios';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Link,useLocation}from'react-router-dom';import{useRecoilState,useRecoilValue}from'recoil';import{endpointState,typeCreatePerfil}from'../../recoil/atoms';import CheckboxMobile from'../../components/CheckboxMobile/CheckboxMobile';import Input from'../../components/Input/Input';import Loading from'../../components/Loading/Loading';var Register=function Register(_ref){var history=_ref.history;var _useRecoilValue=useRecoilValue(endpointState),urlEndpoint=_useRecoilValue.urlEndpoint;var urlEndpointCreateUser=\"\".concat(urlEndpoint,\"/register\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),disableFields=_useState2[0],setDisableFields=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showRequiredBallon=_useState4[0],setShowRequiredBallon=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),permanecerLogado=_useState6[0],setPermanecerLogado=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),aceitarNotificacoes=_useState8[0],setAceitarNotificacoes=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showLoading=_useState10[0],setShowLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),termosCondicoes=_useState12[0],setTermosCondicoes=_useState12[1];var _useState13=useState({value:'',required:true}),_useState14=_slicedToArray(_useState13,2),nome=_useState14[0],setNome=_useState14[1];var _useState15=useState({value:'',required:true}),_useState16=_slicedToArray(_useState15,2),email=_useState16[0],setEmail=_useState16[1];var _useState17=useState({value:'',required:true}),_useState18=_slicedToArray(_useState17,2),senha=_useState18[0],setSenha=_useState18[1];var _useState19=useState({value:'',required:true}),_useState20=_slicedToArray(_useState19,2),senhaconfirmacao=_useState20[0],setSenhaConfirmacao=_useState20[1];var _useRecoilState=useRecoilState(typeCreatePerfil),_useRecoilState2=_slicedToArray(_useRecoilState,2),AtomTypeCreatePerfil=_useRecoilState2[0],setAtomTypeCreatePerfil=_useRecoilState2[1];var location=useLocation();var continueLink='/documents';var userTypeId=2;if(location.pathname==='/register'){continueLink='/documents';userTypeId=2;}else if(location.pathname==='/register-partner'){continueLink='/documents';userTypeId=5;}else if(location.pathname==='/register-swing'){continueLink='/documents';userTypeId=3;}else if(location.pathname==='/register-close-friends'){continueLink='/documents';userTypeId=4;}var limpaCampos=function limpaCampos(){setNome({value:'',required:nome.required});setEmail({value:'',required:email.required});setSenha({value:'',required:senha.required});setSenhaConfirmacao({value:'',required:senhaconfirmacao.required});setShowRequiredBallon(false);};var handleCadastrar=function handleCadastrar(e){e.preventDefault();setShowRequiredBallon(true);if(!termosCondicoes){toast.error('Você deve aceitar os termos e condições para se cadastrar.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else if(nome.value===''){toast.error('Erro ao cadastrar. Nome não informado.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else if(email.value===''||!validateEmail(email.value)){toast.error('Erro ao cadastrar. E-mail não informado ou inválido.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else if(senha.value!==senhaconfirmacao.value){toast.error('Erro ao cadastrar. As senhas devem ser iguais.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else if(senha.value===senhaconfirmacao.value&&senha.value.length<6){toast.error('Erro ao cadastrar. A senha deve ter 6 ou mais digitos.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else{setDisableFields(true);setShowLoading(true);axios.post(urlEndpointCreateUser,{user_type_id:userTypeId,name:nome.value,email:email.value,password:senha.value,password_confirmation:senhaconfirmacao.value,options:{sms:1}},{headers:{'Content-Type':'application/json'}}).then(function(response){if(response.status===201){localStorage.setItem('token',response.data.access_token);localStorage.setItem('user_type',userTypeId.toString());localStorage.setItem('perfilCreate','0');history.push(continueLink);}setShowLoading(false);}).catch(function(error){var errosServidor=error.response.data.errors;if(typeof errosServidor.email!==typeof undefined&&errosServidor.email[0]==='The email has already been taken.'){toast.error('O e-mail escolhido já está sendo utilizado.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}else{toast.error('Erro ao cadastrar. Verifique os campos obrigatórios e tente novamente.',{position:'bottom-right',autoClose:3000,hideProgressBar:true,closeOnClick:false,pauseOnHover:true,draggable:false,progress:undefined});}setDisableFields(false);setShowLoading(false);});}};function validateEmail(emailTest){var re=// eslint-disable-next-line\n/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(emailTest);}useEffect(function(){if(location.pathname==='/register'){setAtomTypeCreatePerfil({typePerfil:'acompanhante'});}else if(location.pathname==='/register-partner'){setAtomTypeCreatePerfil({typePerfil:'partner'});}else if(location.pathname==='/register-swing'){setAtomTypeCreatePerfil({typePerfil:'swing'});}else if(location.pathname==='/register-close-friends'){setAtomTypeCreatePerfil({typePerfil:'close-friends'});}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cabecalho-register text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Criar Conta\",/*#__PURE__*/_jsx(Link,{to:'/login',className:\"float-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-register\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Input,{name:'nome',type:'text',placeholder:'Nome',onChange:function onChange(e){return setNome({value:e.currentTarget.value,required:nome.required});},value:nome.value,required:nome.required,disabled:disableFields})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Input,{name:'email',type:'email',placeholder:'E-mail',onChange:function onChange(e){return setEmail({value:e.currentTarget.value,required:email.required});},value:email.value,required:email.required,disabled:disableFields})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Input,{name:'password',type:'password',placeholder:'Senha',descricaoCampo:'Sua senha deve ter no mínimo 6 caracteres.',onChange:function onChange(e){return setSenha({value:e.currentTarget.value,required:senha.required});},value:senha.value,required:senha.required,disabled:disableFields})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(Input,{name:'passwordConfirmation',type:'password',placeholder:'Confirme a senha',descricaoCampo:'Sua senha deve ter no mínimo 6 caracteres.',onChange:function onChange(e){return setSenhaConfirmacao({value:e.currentTarget.value,required:senhaconfirmacao.required});},value:senhaconfirmacao.value,required:senhaconfirmacao.required,disabled:disableFields})}),/*#__PURE__*/_jsx(\"hr\",{className:'mb-6'}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(CheckboxMobile,{label:'Permanecer logado',isChecked:permanecerLogado,onClick:function onClick(){return setPermanecerLogado(!permanecerLogado);}})}),/*#__PURE__*/_jsx(\"hr\",{className:\"mb-3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-12\",children:/*#__PURE__*/_jsx(CheckboxMobile,{label:'Eu aceito os termos',descricaoCampo:'Termos e condições',isChecked:termosCondicoes,onClick:function onClick(){return setTermosCondicoes(!termosCondicoes);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-register\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleCadastrar,className:\"block w-full p-2 rounded-full text-center bg-white\",disabled:disableFields,children:\"Continuar\"})}),/*#__PURE__*/_jsx(Loading,{showLoading:showLoading})]});};export default Register;","map":{"version":3,"sources":["/home/clickc/www/click-company-main/src/pages/Register/Register.tsx"],"names":["React","useEffect","useState","axios","toast","Link","useLocation","useRecoilState","useRecoilValue","endpointState","typeCreatePerfil","CheckboxMobile","Input","Loading","Register","history","urlEndpoint","urlEndpointCreateUser","disableFields","setDisableFields","showRequiredBallon","setShowRequiredBallon","permanecerLogado","setPermanecerLogado","aceitarNotificacoes","setAceitarNotificacoes","showLoading","setShowLoading","termosCondicoes","setTermosCondicoes","value","required","nome","setNome","email","setEmail","senha","setSenha","senhaconfirmacao","setSenhaConfirmacao","AtomTypeCreatePerfil","setAtomTypeCreatePerfil","location","continueLink","userTypeId","pathname","limpaCampos","handleCadastrar","e","preventDefault","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","validateEmail","length","post","user_type_id","name","password","password_confirmation","options","sms","headers","then","response","status","localStorage","setItem","data","access_token","toString","push","catch","errosServidor","errors","emailTest","re","test","typePerfil","currentTarget"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Link, RouteComponentProps, useLocation } from 'react-router-dom';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { endpointState, typeCreatePerfil } from '../../recoil/atoms';\n\nimport CheckboxMobile from '../../components/CheckboxMobile/CheckboxMobile';\nimport Input from '../../components/Input/Input';\nimport Loading from '../../components/Loading/Loading';\n\nconst Register: React.FC<RouteComponentProps> = ({ history }) => {\n\ttype typeResponseAxios = {\n\t\t[key: string]: any;\n\t};\n\n\tconst { urlEndpoint } = useRecoilValue(endpointState);\n\tconst urlEndpointCreateUser = `${urlEndpoint}/register`;\n\n\tconst [disableFields, setDisableFields] = useState(false);\n\n\tconst [showRequiredBallon, setShowRequiredBallon] = useState(false);\n\n\tconst [permanecerLogado, setPermanecerLogado] = useState(false);\n\n\tconst [aceitarNotificacoes, setAceitarNotificacoes] = useState(false);\n\n\tconst [showLoading, setShowLoading] = useState(false);\n\n\tconst [termosCondicoes, setTermosCondicoes] = useState(false);\n\n\tconst [nome, setNome] = useState({\n\t\tvalue: '',\n\t\trequired: true,\n\t});\n\n\tconst [email, setEmail] = useState({\n\t\tvalue: '',\n\t\trequired: true,\n\t});\n\n\tconst [senha, setSenha] = useState({\n\t\tvalue: '',\n\t\trequired: true,\n\t});\n\n\tconst [senhaconfirmacao, setSenhaConfirmacao] = useState({\n\t\tvalue: '',\n\t\trequired: true,\n\t});\n\n\tconst [AtomTypeCreatePerfil, setAtomTypeCreatePerfil] =\n\t\tuseRecoilState(typeCreatePerfil);\n\n\tconst location = useLocation();\n\n\tlet continueLink = '/documents';\n\tlet userTypeId = 2;\n\n\tif (location.pathname === '/register') {\n\t\tcontinueLink = '/documents';\n\t\tuserTypeId = 2;\n\t} else if (location.pathname === '/register-partner') {\n\t\tcontinueLink = '/documents';\n\t\tuserTypeId = 5;\n\t} else if (location.pathname === '/register-swing') {\n\t\tcontinueLink = '/documents';\n\t\tuserTypeId = 3;\n\t} else if (location.pathname === '/register-close-friends') {\n\t\tcontinueLink = '/documents';\n\t\tuserTypeId = 4;\n\t}\n\n\tconst limpaCampos = () => {\n\t\tsetNome({\n\t\t\tvalue: '',\n\t\t\trequired: nome.required,\n\t\t});\n\t\tsetEmail({\n\t\t\tvalue: '',\n\t\t\trequired: email.required,\n\t\t});\n\t\tsetSenha({\n\t\t\tvalue: '',\n\t\t\trequired: senha.required,\n\t\t});\n\t\tsetSenhaConfirmacao({\n\t\t\tvalue: '',\n\t\t\trequired: senhaconfirmacao.required,\n\t\t});\n\n\t\tsetShowRequiredBallon(false);\n\t};\n\n\tconst handleCadastrar = (e: any) => {\n\t\te.preventDefault();\n\n\t\tsetShowRequiredBallon(true);\n\n\t\tif (!termosCondicoes) {\n\t\t\ttoast.error(\n\t\t\t\t'Você deve aceitar os termos e condições para se cadastrar.',\n\t\t\t\t{\n\t\t\t\t\tposition: 'bottom-right',\n\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\tpauseOnHover: true,\n\t\t\t\t\tdraggable: false,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t},\n\t\t\t);\n\t\t} else if (nome.value === '') {\n\t\t\ttoast.error('Erro ao cadastrar. Nome não informado.', {\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tautoClose: 3000,\n\t\t\t\thideProgressBar: true,\n\t\t\t\tcloseOnClick: false,\n\t\t\t\tpauseOnHover: true,\n\t\t\t\tdraggable: false,\n\t\t\t\tprogress: undefined,\n\t\t\t});\n\t\t} else if (email.value === '' || !validateEmail(email.value)) {\n\t\t\ttoast.error('Erro ao cadastrar. E-mail não informado ou inválido.', {\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tautoClose: 3000,\n\t\t\t\thideProgressBar: true,\n\t\t\t\tcloseOnClick: false,\n\t\t\t\tpauseOnHover: true,\n\t\t\t\tdraggable: false,\n\t\t\t\tprogress: undefined,\n\t\t\t});\n\t\t} else if (senha.value !== senhaconfirmacao.value) {\n\t\t\ttoast.error('Erro ao cadastrar. As senhas devem ser iguais.', {\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tautoClose: 3000,\n\t\t\t\thideProgressBar: true,\n\t\t\t\tcloseOnClick: false,\n\t\t\t\tpauseOnHover: true,\n\t\t\t\tdraggable: false,\n\t\t\t\tprogress: undefined,\n\t\t\t});\n\t\t} else if (\n\t\t\tsenha.value === senhaconfirmacao.value &&\n\t\t\tsenha.value.length < 6\n\t\t) {\n\t\t\ttoast.error('Erro ao cadastrar. A senha deve ter 6 ou mais digitos.', {\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tautoClose: 3000,\n\t\t\t\thideProgressBar: true,\n\t\t\t\tcloseOnClick: false,\n\t\t\t\tpauseOnHover: true,\n\t\t\t\tdraggable: false,\n\t\t\t\tprogress: undefined,\n\t\t\t});\n\t\t} else {\n\t\t\tsetDisableFields(true);\n\t\t\tsetShowLoading(true);\n\n\t\t\taxios\n\t\t\t\t.post(\n\t\t\t\t\turlEndpointCreateUser,\n\t\t\t\t\t{\n\t\t\t\t\t\tuser_type_id: userTypeId,\n\t\t\t\t\t\tname: nome.value,\n\t\t\t\t\t\temail: email.value,\n\t\t\t\t\t\tpassword: senha.value,\n\t\t\t\t\t\tpassword_confirmation: senhaconfirmacao.value,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsms: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.then(function (response: typeResponseAxios) {\n\t\t\t\t\tif (response.status === 201) {\n\t\t\t\t\t\tlocalStorage.setItem('token', response.data.access_token);\n\t\t\t\t\t\tlocalStorage.setItem('user_type', userTypeId.toString());\n\t\t\t\t\t\tlocalStorage.setItem('perfilCreate', '0');\n\n\t\t\t\t\t\thistory.push(continueLink);\n\t\t\t\t\t}\n\t\t\t\t\tsetShowLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\tconst errosServidor = error.response.data.errors;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof errosServidor.email !== typeof undefined &&\n\t\t\t\t\t\terrosServidor.email[0] === 'The email has already been taken.'\n\t\t\t\t\t) {\n\t\t\t\t\t\ttoast.error('O e-mail escolhido já está sendo utilizado.', {\n\t\t\t\t\t\t\tposition: 'bottom-right',\n\t\t\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\t\tpauseOnHover: true,\n\t\t\t\t\t\t\tdraggable: false,\n\t\t\t\t\t\t\tprogress: undefined,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t'Erro ao cadastrar. Verifique os campos obrigatórios e tente novamente.',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tposition: 'bottom-right',\n\t\t\t\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\t\t\tpauseOnHover: true,\n\t\t\t\t\t\t\t\tdraggable: false,\n\t\t\t\t\t\t\t\tprogress: undefined,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tsetDisableFields(false);\n\t\t\t\t\tsetShowLoading(false);\n\t\t\t\t});\n\t\t}\n\t};\n\n\tfunction validateEmail(emailTest: string) {\n\t\tconst re =\n\t\t\t// eslint-disable-next-line\n\t\t\t/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn re.test(emailTest);\n\t}\n\n\tuseEffect(() => {\n\t\tif (location.pathname === '/register') {\n\t\t\tsetAtomTypeCreatePerfil({\n\t\t\t\ttypePerfil: 'acompanhante',\n\t\t\t});\n\t\t} else if (location.pathname === '/register-partner') {\n\t\t\tsetAtomTypeCreatePerfil({\n\t\t\t\ttypePerfil: 'partner',\n\t\t\t});\n\t\t} else if (location.pathname === '/register-swing') {\n\t\t\tsetAtomTypeCreatePerfil({\n\t\t\t\ttypePerfil: 'swing',\n\t\t\t});\n\t\t} else if (location.pathname === '/register-close-friends') {\n\t\t\tsetAtomTypeCreatePerfil({\n\t\t\t\ttypePerfil: 'close-friends',\n\t\t\t});\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<div className=\"bg-white\">\n\t\t\t<div className=\"cabecalho-register text-center\">\n\t\t\t\t<p>\n\t\t\t\t\tCriar Conta\n\t\t\t\t\t<Link to={'/login'} className=\"float-right\">\n\t\t\t\t\t\t<i className=\"fas fa-times\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"body-register\">\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'nome'}\n\t\t\t\t\t\ttype={'text'}\n\t\t\t\t\t\tplaceholder={'Nome'}\n\t\t\t\t\t\tonChange={(e: React.FormEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\tsetNome({\n\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\trequired: nome.required,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={nome.value}\n\t\t\t\t\t\trequired={nome.required}\n\t\t\t\t\t\tdisabled={disableFields}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'email'}\n\t\t\t\t\t\ttype={'email'}\n\t\t\t\t\t\tplaceholder={'E-mail'}\n\t\t\t\t\t\tonChange={(e: React.FormEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\tsetEmail({\n\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\trequired: email.required,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={email.value}\n\t\t\t\t\t\trequired={email.required}\n\t\t\t\t\t\tdisabled={disableFields}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'password'}\n\t\t\t\t\t\ttype={'password'}\n\t\t\t\t\t\tplaceholder={'Senha'}\n\t\t\t\t\t\tdescricaoCampo={'Sua senha deve ter no mínimo 6 caracteres.'}\n\t\t\t\t\t\tonChange={(e: React.FormEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\tsetSenha({\n\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\trequired: senha.required,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={senha.value}\n\t\t\t\t\t\trequired={senha.required}\n\t\t\t\t\t\tdisabled={disableFields}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tname={'passwordConfirmation'}\n\t\t\t\t\t\ttype={'password'}\n\t\t\t\t\t\tplaceholder={'Confirme a senha'}\n\t\t\t\t\t\tdescricaoCampo={'Sua senha deve ter no mínimo 6 caracteres.'}\n\t\t\t\t\t\tonChange={(e: React.FormEvent<HTMLInputElement>) =>\n\t\t\t\t\t\t\tsetSenhaConfirmacao({\n\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\trequired: senhaconfirmacao.required,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={senhaconfirmacao.value}\n\t\t\t\t\t\trequired={senhaconfirmacao.required}\n\t\t\t\t\t\tdisabled={disableFields}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<hr className={'mb-6'} />\n\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t<CheckboxMobile\n\t\t\t\t\t\tlabel={'Permanecer logado'}\n\t\t\t\t\t\tisChecked={permanecerLogado}\n\t\t\t\t\t\tonClick={() => setPermanecerLogado(!permanecerLogado)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{/* <hr className=\"mb-3\" />\n\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t<CheckboxMobile\n\t\t\t\t\t\tlabel={'Aceitar notificações por sms'}\n\t\t\t\t\t\tisChecked={aceitarNotificacoes}\n\t\t\t\t\t\tonClick={() => setAceitarNotificacoes(!aceitarNotificacoes)}\n\t\t\t\t\t/>\n\t\t\t\t</div> */}\n\t\t\t\t<hr className=\"mb-3\" />\n\t\t\t\t<div className=\"mb-12\">\n\t\t\t\t\t<CheckboxMobile\n\t\t\t\t\t\tlabel={'Eu aceito os termos'}\n\t\t\t\t\t\tdescricaoCampo={'Termos e condições'}\n\t\t\t\t\t\tisChecked={termosCondicoes}\n\t\t\t\t\t\tonClick={() => setTermosCondicoes(!termosCondicoes)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"footer-register\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tonClick={handleCadastrar}\n\t\t\t\t\tclassName=\"block w-full p-2 rounded-full text-center bg-white\"\n\t\t\t\t\tdisabled={disableFields}\n\t\t\t\t>\n\t\t\t\t\tContinuar\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<Loading showLoading={showLoading} />\n\t\t</div>\n\t);\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}